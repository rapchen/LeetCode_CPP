//
// Created by rapch on 2021/12/12.
//
#include <string>
#include <vector>

using namespace std;

class Solution {
public:
    int maxTotalFruits(vector<vector<int>>& fruits, int startPos, int k) {
        int f[200001] = {0}, left[200001] = {0}, right[200001] = {0};
        for (vector<int> pair: fruits) {
            f[pair[0]] = pair[1];
        }
        for (int i = 1; i <= 200000; ++i) {
            if (startPos - i >= 0)
                left[i] = left[i - 1] + f[startPos - i];
            else
                left[i] = left[i - 1];
        }
        for (int i = 1; i <= 200000 - startPos; ++i) {
            if (startPos + i <= 200000)
                right[i] = right[i - 1] + f[startPos + i];
            else
                right[i] = right[i - 1];
        }

        int res = 0;
        // left right
        for (int i = 0; i <= k / 2; ++i) {
            res = max(res, left[i] + right[k - i * 2]);
        }
        // right left
        for (int i = 0; i <= k / 2; ++i) {
            res = max(res, right[i] + left[k - i * 2]);
        }
        return res + f[startPos];
    }
};

//int main() {
//    vector<vector<int>> fruits = {[[0,15],[3,56],[4,98],[5,81],[7,16],[8,77],[9,89],[12,82],[13,49],[14,59],[17,40],[18,83],[19,35],[20,31],[21,44],[22,92],[25,84],[26,42],[29,4],[33,78],[35,83],[36,3],[37,71],[41,24],[44,81],[45,35],[46,81],[48,81],[50,85],[52,32],[53,93],[54,89],[55,82],[56,60],[59,52],[62,79],[63,90],[64,41],[66,15],[68,43],[69,32],[70,51],[71,79],[75,39],[76,21],[78,16],[79,44],[80,73],[81,95],[83,95],[85,11],[87,80],[88,2],[90,89],[99,35],[100,95]]};
//
//}



//[[0,15],[3,56],[4,98],[5,81],[7,16],[8,77],[9,89],[12,82],[13,49],[14,59],[17,40],[18,83],[19,35],[20,31],[21,44],[22,92],[25,84],[26,42],[29,4],[33,78],[35,83],[36,3],[37,71],[41,24],[44,81],[45,35],[46,81],[48,81],[50,85],[52,32],[53,93],[54,89],[55,82],[56,60],[59,52],[62,79],[63,90],[64,41],[66,15],[68,43],[69,32],[70,51],[71,79],[75,39],[76,21],[78,16],[79,44],[80,73],[81,95],[83,95],[85,11],[87,80],[88,2],[90,89],[99,35],[100,95]]
//86
//107
